\input{../../sheet.tex}
\sbasic
\input{../equations/macros.tex}
\input{../ordered_pairs/macros.tex}
\input{../identity/macros.tex}
\input{../objects/macros.tex}
\input{../equation_solutions/macros.tex}
\input{../relations/macros.tex}
\input{../set_equality/macros.tex}
\input{../sets/macros.tex}
\input{../integer_numbers/macros.tex}
\input{../empty_set/macros.tex}
\input{../functions/macros.tex}
\input{../set_complements/macros.tex}
\input{../operations/macros.tex}
\input{../set_inclusion/macros.tex}
\input{../sentences/macros.tex}
\input{../family_operations/macros.tex}
\input{../arithmetic/macros.tex}
\input{../common_sense/macros.tex}
\input{../injective_functions/macros.tex}
\input{../rational_numbers/macros.tex}
\input{../natural_numbers/macros.tex}
\input{../families/macros.tex}
\input{../natural_addition/macros.tex}
\input{../set_symmetric_differences/macros.tex}
\input{../set_intersections/macros.tex}
\input{../algebras/macros.tex}
\input{../power_set/macros.tex}
\input{../set_specification/macros.tex}
\input{../unordered_pairs/macros.tex}
\input{../natural_summation/macros.tex}
\input{../probability/macros.tex}
\input{../cardinality/macros.tex}
\input{../real_numbers/macros.tex}
\input{../natural_order/macros.tex}
\input{../natural_families/macros.tex}
\input{../natural_difference/macros.tex}
\input{../set_operations/macros.tex}
\input{../probability_events/macros.tex}
\input{../set_unions/macros.tex}
\input{../graphs/macros.tex}
\input{../real_summation/macros.tex}
\input{../probability_outcomes/macros.tex}
\input{../intervals/macros.tex}
\input{../direct_products/macros.tex}
\input{../event_probabilities/macros.tex}
\input{../trees/macros.tex}
\input{../probability_distributions/macros.tex}
\input{../marginal_distributions/macros.tex}
\input{../conditional_event_probability/macros.tex}
\input{../rooted_trees/macros.tex}
\input{../conditional_distributions/macros.tex}
\input{./macros.tex}
\sstart
\stitle{Rooted Tree Distributions}

\ssection{Why}

We consider distributions over products of several finite sets.
These distributions have many outcomes, and so tabulating the probabilities associated with each outcome is usually laborious, and most often infeasible.
So instead of working with all such distributions, we work with those for which the probabilities can be expressed by tabulating fewer numbers.

\ssection{Definition}

A distribution over a product of $n$ finite sets has $n$ one-variable marginals (one for each component) and $n(n-1)$ two-variable conditionals (one for each component given each other component).
We will be interested in those distributions over this product which can be written as a product of these marginals and conditionals.

A distribution over a product of $n$ finite (non-empty) sets \t{factors according to a rooted tree} on $\set{1, \dots, n}$ if the probability of each outcome can be expressed as the product of the marginal probability of the component corresponding to the root of the tree and the conditionals corresponding to the edges in the tree.

\ssubsection{Notation}

Let $A_1, \dots, A_n$ be finite sets and define $A = \prod_{i = 1}^{n}$.
Let $p: A \to [0, 1]$ be a distribution.
If for every $a \in A$, $$p(a) = p_k(a_k)\prod_{(i, j) \in E} p_{i \mid j}(a_i, a_j)$$ where $k \in \set{1, \dots, n}$, $E \subset \set{1, \dots, n}^2$ and $(\set{1, \dots, n}, E)$ is a tree, then $p$ factors according to that same tree rooted at vertex $k$.

\ssection{Example}

\img{0.15}{tree}

Let $T = (\set{1, 2, 3, 4, 5, 6}, \set{\set{1, 2}, \set{2, 3}, \set{2, 4}, \set{4, 5}, \set{4, 6}})$ (visualized above). Root $T$ at vertex 1.
% Then by chain rule $p$ always satisfies $$p(a_1, a_2, a_3, a_4, a_5, a_6) = p_{6 \mid 4}(a_6, a_4)p_{5 \mid 4}(a_5, a_4)p_{4 \mid 2}(a_4, a_2) p_{3 \mid 2}(a_3, a_2)p_{2 \mid 1}(a_2, a_1)$$.
Then by chain rule $p$ always satisfies $$p = p_{6 \mid 5, 4, 3, 2, 1}p_{5 \mid 4, 3, 2, 1}p_{4 \mid 3, 2, 1} p_{3 \mid 2, 1}p_{2 \mid 1}$$.
If $p$ factors according to $T$ rooted at vertex 1 then it satisfies $$p = p_{6 \mid 4}p_{5 \mid 4}p_{4 \mid 2}p_{3 \mid 2}p_{2 \mid 1}$$.

So $p_{6 \mid 5, 4, 3, 2, 1} = p_{6 \mid 4}$. In other words, the conditional distribution does not depend on $a_1$, $a_2$, $a_3$ or $a_5$. Similarly for $p_{5 \mid 4}$, $p_{4 \mid 2}$ and $p_{3 \mid 2}$.

\strats
