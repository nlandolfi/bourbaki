<!DOCTYPE html>
  <meta charset="utf-8"/>
  <head>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../fonts.css">
    <script src="../pdfjs/build/pdf.js"></script>
  </head>
  <body>
    <div class="header">
      <span class="listing no-border" id="header-trademark-and-title">
        <img id="header-trademark" src="../trademark.jpg" onclick="location.href='../index.html'">
        <span id="header-title" onclick="location.href='./rooted_tree_distributions.pdf#page=2'"> Rooted Tree Distributions </span>
      </span>
    </div>
    <div class="subheader">
      <div disabled class="need label"> Links: </div>
      <div class="need" tabindex="0" onclick="location.href='./rooted_tree_distributions.pdf#page=2'" onkeypress="location.href='./rooted_tree_distributions.pdf#page=2'">
        <span> Sheet PDF </span>
        <span class="caret">›</span>
      </div>
      <div class="need" tabindex="0" onclick="location.href='./rooted_tree_distributions-graph.pdf'" onkeypress="location.href='./rooted_tree_distributions-graph.pdf'">
        <span> Graph PDF </span>
        <span class="caret">›</span>
      </div>
      
        <div disabled class="need label"> Needs: </div>
        
            <div class="need" tabindex="0" onclick="location.href='./conditional_distributions.html'" onkeypress="location.href='./conditional_distributions.html'">
              <span>
                Conditional Distributions
              </span>
              <span class="caret">›</span>
            </div>
        
            <div class="need" tabindex="0" onclick="location.href='./rooted_trees.html'" onkeypress="location.href='./rooted_trees.html'">
              <span>
                Rooted Trees
              </span>
              <span class="caret">›</span>
            </div>
        
      
      
        <div disabled class="need label"> Needed by: </div>
        
          <div class="need" tabindex="0" onclick="location.href='./directed_graph_distributions.html'" onkeypress="location.href='./directed_graph_distributions.html'">
            <span>
            Directed Graph Distributions
            </span>
            <span class="caret">›</span>
          </div>
        
          <div class="need" tabindex="0" onclick="location.href='./rooted_tree_densities.html'" onkeypress="location.href='./rooted_tree_densities.html'">
            <span>
            Rooted Tree Densities
            </span>
            <span class="caret">›</span>
          </div>
        
          <div class="need" tabindex="0" onclick="location.href='./tree_distributions.html'" onkeypress="location.href='./tree_distributions.html'">
            <span>
            Tree Distributions
            </span>
            <span class="caret">›</span>
          </div>
        
      
    </div>

      <link rel="stylesheet" href="../katex/katex.min.css">
      <script src="../katex/katex.min.js"></script>
      <script src="../katex/auto-render.min.js"></script>
      <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(
          document.body,
          {
            delimiters: [
              {left: "$$", right: "$$", display: true},
              {left: "$", right: "$", display: false},
            ],
          },
        );
      });
    </script>
    <div id="sheet-card" class="card">
      <div class="sheet-listing" id="why"><h1 class="sheet">1. Why</h1></div><div class="sheet-listing"><p class="sheet"> We consider distributions over products of several finite sets. These distributions have many outcomes, and so tabulating the probabilities associated with each outcome is usually laborious, and most often infeasible. So instead of working with all such distributions, we work with those for which the probabilities can be expressed by tabulating fewer numbers.</p></div><div class="sheet-listing" id="definition"><h1 class="sheet">2. Definition</h1></div><div class="sheet-listing"><p class="sheet"> A distribution over a product of $n$ finite sets has $n$ one-variable marginals (one for each component) and $n(n-1)$ two-variable conditionals (one for each component given each other component). We will be interested in those distributions over this product which can be written as a product of these marginals and conditionals.</p></div><div class="sheet-listing"><p class="sheet"> A distribution over a product of $n$ finite (non-empty) sets \t{factors according to a rooted tree} on $\set{1, \dots, n}$ if the probability of each outcome can be expressed as the product of the marginal probability of the component corresponding to the root of the tree and the conditionals corresponding to the edges in the tree.</p></div><div class="sheet-listing"><h2 class="sheet" id="notation">2.1 Notation</h2></div><div class="sheet-listing"><p class="sheet"> Let $A_1, \dots, A_n$ be finite sets and define $A = \prod_{i = 1}^{n}$. Let $p: A \to [0, 1]$ be a distribution. If for every $a \in A$, $$p(a) = p_k(a_k)\prod_{(i, j) \in E} p_{i \mid j}(a_i, a_j)$$ where $k \in \set{1, \dots, n}$, $E \subset \set{1, \dots, n}^2$ and $(\set{1, \dots, n}, E)$ is a tree, then $p$ factors according to that same tree rooted at vertex $k$.</p></div><div class="sheet-listing" id="example"><h1 class="sheet">3. Example</h1></div><div class="sheet-listing"><p class="sheet"> \fig{\img{0.15}{graphics_included/tree}}{A rooted tree.}{}</p></div><div class="sheet-listing"><p class="sheet"> Let $T = (\set{1, 2, 3, 4, 5, 6}, \set{\set{1, 2}, \set{2, 3}, \set{2, 4}, \set{4, 5}, \set{4, 6}})$ (visualized above). Root $T$ at vertex 1. Then by chain rule $p$ always satisfies $$ p = p_{6 \mid 5, 4, 3, 2, 1}p_{5 \mid 4, 3, 2, 1}p_{4 \mid 3, 2, 1} p_{3 \mid 2, 1}p_{2 \mid 1}. $$ If $p$ factors according to $T$ rooted at vertex 1 then it satisfies $$ p = p_{6 \mid 4}p_{5 \mid 4}p_{4 \mid 2}p_{3 \mid 2}p_{2 \mid 1}. $$</p></div><div class="sheet-listing"><p class="sheet"> So, for instance, $$ p_{6 \mid 5, 4, 3, 2, 1} = p_{6 \mid 4}. $$ In other words, this particular conditional distribution does not depend on $a_1$, $a_2$, $a_3$ or $a_5$. Similarly for $p_{5 \mid 4}$, $p_{4 \mid 2}$ and $p_{3 \mid 2}$.</p></div>
    </div>

    <div style="display: flex; flex-direction: row; justify-content: center; flex-wrap: wrap">

    <div id="wrapper1">
      <canvas id="page1" style="direction: ltr;"></canvas>
    </div>
    <div id="wrapper2">
      <canvas id="page2" style="direction: ltr;"></canvas>
    </div>
    <div id="wrapper3">
    <canvas id="page3" style="direction: ltr;" onclick="location.href='./rooted_tree_distributions-graph.pdf'"></canvas>
    </div>
      <script id="script">
        // If absolute URL from the remote server is provided, configure the CORS
        // header on that server.
        var url = './rooted_tree_distributions.pdf';

        // The workerSrc property shall be specified.
        pdfjsLib.GlobalWorkerOptions.workerSrc =
          '../pdfjs/build/pdf.worker.js';

        var PRINT_RESOLUTION = 300;

        function render(page, wrapper, canvas) {
          var scale = 7;
          var viewport = page.getViewport({scale: scale});
          var context = canvas.getContext('2d');

          canvas.width = viewport.width;
          canvas.height = viewport.height;
          canvas.style.width = "100%";
          canvas.style.height = "100%";
          wrapper.style.width = Math.floor(viewport.width/scale) + 'pt';
          wrapper.style.height = Math.floor(viewport.height/scale) + 'pt';

          // see https://stackoverflow.com/questions/37861686/pdfjs-blurry-pdf-on-ipad
          // who knows if this works...
          context.imageSmoothingEnabled = false;
          context.webkitImageSmoothingEnabled = false;
          context.mozImageSmoothingEnabled = false;
          context.oImageSmoothingEnabled = false;

          /*

          if (window.devicePixelRatio > 1) {
            var canvasWidth = canvas.width;
            var canvasHeight = canvas.height;

            canvas.width = canvasWidth * window.devicePixelRatio;
            canvas.height = canvasHeight * window.devicePixelRatio;
            canvas.style.width = canvasWidth + "px";
            canvas.style.height = canvasHeight + "px";

            context.scale(window.devicePixelRatio, window.devicePixelRatio);
          }
          //end see
          */

          var renderContext = {
            canvasContext: context,
            viewport: viewport
          };
          page.render(renderContext);
        }

        // Asynchronous download PDF
        var loadingTask = pdfjsLib.getDocument(url);
        loadingTask.promise.then(function(pdf) {

          // Fetch the first page
          pdf.getPage(2).then(function(page) {
              render(page, document.getElementById('wrapper1'), document.getElementById('page1'));
          });

          // Fetch the second page
          pdf.getPage(3).then(function(page) {
            render(page, document.getElementById('wrapper2'), document.getElementById('page2'));
          });

          // Fetch the third page
          pdf.getPage(4).then(function(page) {
            render(page, document.getElementById('wrapper3'), document.getElementById('page3'));
          });
        });
      </script>

    <!-- PAGES -->
    <!--
    <iframe id="sheet-pdf" src="./rooted_tree_distributions.pdf#page=2">
    </iframe>
    <iframe id="sheet-pdf" src="./rooted_tree_distributions.pdf#page=3">
    </iframe>
    -->
    <!-- PAGES -->

    </div>

    <!-- <iframe id="graph-pdf" src="./rooted_tree_distributions-graph.pdf">
    </iframe>
    -->

    <span id="footer">
      Copyright 2022 The Bourbaki Authors. Version 5096d3c71.
    </span>
  </body>
</html>
